{{ ansible_managed | comment(beginning="##", end="##", decoration="#", prefix_count=0, postfix_count=0) }}

compilers:
  # system GCC
  - compiler:
      spec: gcc@{{ system_gcc.version }}
      paths:
        cc: /usr/bin/gcc
        cxx: /usr/bin/g++
        f77: /opt/rh/gcc-toolset-13/root/usr/bin/gfortran
        fc: /opt/rh/gcc-toolset-13/root/usr/bin/gfortran
      operating_system: {{ os.identifier }}
      modules: [ ]

  # GCC compiler
  - compiler:
      spec: gcc@{{ gcc.version }}
      paths:
        cc: {{ [NSP_install_root, 'gcc', gcc.version, 'bin/gcc'] | path_join }}
        cxx: {{ [NSP_install_root, 'gcc', gcc.version, 'bin/g++'] | path_join }}
        f77: {{ [NSP_install_root, 'gcc', gcc.version, 'bin/gfortran'] | path_join }}
        fc: {{ [NSP_install_root, 'gcc', gcc.version, 'bin/gfortran'] | path_join }}
      operating_system: {{ os.identifier }}
      modules:
        - gcc/{{ gcc.version }}

  # LLVM compiler
{% set gcc_v_list = gcc.version.split(".") %}
  - compiler:
      spec: clang@{{ llvm.version }} #-gfortran{{ gcc_v_list[0] }}
      paths:
        cc: {{ [NSP_install_root, 'llvm', llvm.version, 'bin/clang'] | path_join }}
        cxx: {{ [NSP_install_root, 'llvm', llvm.version, 'bin/clang++'] | path_join }}
        f77: {{ [NSP_install_root, 'gcc', gcc.version, 'bin/gfortran'] | path_join }}
        fc: {{ [NSP_install_root, 'gcc', gcc.version, 'bin/gfortran'] | path_join }}
      operating_system: {{ os.identifier }}
      modules:
        - llvm/{{ llvm.version }}

  # ONEAPI compiler
  - compiler:
      spec: oneapi@{{ oneapi.version }}
      paths:
        cc: {{ [NSP_install_root, 'oneapi',  oneapi.version, 'compiler/latest/bin/icx'] | path_join }}
        cxx: {{ [NSP_install_root, 'oneapi', oneapi.version, 'compiler/latest/bin/icpx'] | path_join }}
        f77: {{ [NSP_install_root, 'oneapi', oneapi.version, 'compiler/latest/bin/ifx'] | path_join }}
        fc: {{ [NSP_install_root, 'oneapi',  oneapi.version, 'compiler/latest/bin/ifx'] | path_join }}
      operating_system: {{ os.identifier }}
      modules:
        - oneapi/{{ oneapi.version }}
  
  # CPE gnu compiler
  - compiler:
      spec: gcc@=12.2.1
      paths:
        cc: /opt/rh/gcc-toolset-12/root/usr/bin/gcc
        cxx: /opt/rh/gcc-toolset-12/root/usr/bin/g++
        f77: /opt/rh/gcc-toolset-12/root/usr/bin/gfortran
        fc: /opt/rh/gcc-toolset-12/root/usr/bin/gfortran
      flags: {}
      operating_system: rhel9
      target: x86_64
      modules:
        - cpe-stack
        - PrgEnv-gnu
      environment: {}
      extra_rpaths: []

  - compiler:
      spec: gcc@=13.2.1
      paths:
        cc: /opt/rh/gcc-toolset-13/root/usr/bin/gcc
        cxx: /opt/rh/gcc-toolset-13/root/usr/bin/g++
        f77: /opt/rh/gcc-toolset-13/root/usr/bin/gfortran
        fc: /opt/rh/gcc-toolset-13/root/usr/bin/gfortran
      flags: {}
      operating_system: rhel9
      target: x86_64
      modules:
        - cpe-stack
        - PrgEnv-gnu
      environment: {}
      extra_rpaths: []
